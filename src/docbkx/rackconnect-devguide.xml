<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book [
<!ENTITY PREFIX "rackconnect">
<!ENTITY PRODUCTNAME "RackConnect">
     <!-- Some useful entities borrowed from HTML -->
        <!ENTITY ndash  "&#x2013;">
        <!ENTITY mdash  "&#x2014;">
        <!ENTITY hellip "&#x2026;">
        
        <!-- Useful for describing APIs -->
        <!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
        <!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
        <!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
        <!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
        
        <!-- changing authentication endpoints; define entities for US & UK rather than maintaining in text -->
        <!ENTITY ENDPOINT-US "https://identity.api.rackspacecloud.com/v1.1/">
        <!ENTITY ENDPOINT-UK "https://lon.identity.api.rackspacecloud.com/v1.1/">
        <!ENTITY ENDPOINT-US-20 "https://identity.api.rackspacecloud.com/v2.0/">
        <!ENTITY ENDPOINT-UK-20 "https://lon.identity.api.rackspacecloud.com/v2.0/">
        
        <!ENTITY CHECK  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
                 <imageobject>
                  <imagedata fileref="img/Check_mark_23x20_02.svg"
                             format="SVG" scale="60"/>
                </imageobject>
              </inlinemediaobject>'>
              
        <!ENTITY ARROW  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
                 <imageobject>
                  <imagedata fileref="img/Arrow_east.svg"
                             format="SVG" scale="60"/>
                </imageobject>
              </inlinemediaobject>'>
]>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:svg="http://www.w3.org/2000/svg" version="5.0"
  xml:id="&PREFIX;-devguide">
  <title>&PRODUCTNAME; API Developer Guide</title>
  <titleabbrev>&PRODUCTNAME; API DevGuide</titleabbrev>
  <?rax canonical.url.base="http://docs.rackspace.com/rackconnect/api/v3/rackconnect-devguide/content"?>
  <info>
    <copyright>
      <year>2015</year>
      <holder>Rackspace US, Inc.</holder>
    </copyright>
    <releaseinfo>API v3</releaseinfo>
    <productname>&PRODUCTNAME;</productname>
    <!--The <productname> text matches the first few words of the title. 
      The build system splits the title into 
      productname + rest of title on the pdf cover.-->
    <!--If you leave the <pubdate> element empty, 
      the build system inserts today's date automatically. -->
    <pubdate></pubdate>
    <!-- abstract -->
    <abstract>
      <para>This document is intended for software developers interested in developing applications
        using the RackConnect Application Programming Interface (<abbrev>API</abbrev>). </para>
    </abstract>
    <!--
The values in raxm:metadata are used to control where the content appears on the landing page in docs.rackspace.com.
Work with the Cloud Doc Tools team to find out what to put here. Once established, you should not change these
values without first consulting with the CDT team.
-->
    <revhistory>
      <revision>
        <date>2015-05-06</date>
        <revdescription>
          <para>Added new examples to API operations for making requests</para>
        </revdescription>
      </revision>
        <revision>
        <date>2014-12-01</date>
        <revdescription>
          <para> Initial Rackspace-branded draft. </para>
        </revdescription>
      </revision>
    </revhistory>
    <legalnotice role="rs-api">
      <annotation>
        <remark>Copyright details are filled in by the build system.</remark>
      </annotation>
    </legalnotice>
<raxm:metadata xmlns:raxm="http://docs.rackspace.com/api/metadata">
            <raxm:displayname>API Developer Guide</raxm:displayname>
            <raxm:product version="v3">rackconnect</raxm:product>
            <raxm:priority>20</raxm:priority>
        </raxm:metadata>

     
    <!-- 
       The values in raxm:metadata control 
       where the content appears on the docs.rackspace.com
       landing page.
       Work with Self Service Engineering to find out what to put here. 
    -->
    <!-- 
         hide until can get valid value for RackConnect;
         til then, it causes status=red 
      <raxm:metadata xmlns:raxm="http://docs.rackspace.com/api/metadata">
        <raxm:displayname>API Developer Guide</raxm:displayname>
        <raxm:product version="v3">&PREFIX;</raxm:product>
        <raxm:priority>20</raxm:priority>
      </raxm:metadata>
      -->
  </info>
  <chapter xml:id="overview">
    <title>Introduction</title>
    <para> This is an early draft of the Rackspace documentation describing the &PRODUCTNAME; v3
      API. </para>
    <section xml:id="resources">
      <title>Additional resources</title>
      <para>You can view additional documentation at the following locations:</para>
      <para>
        <itemizedlist>
          <listitem>
            <para>The draft descriptions of pending features is available at <link
                xlink:href="http://docs.rcv3.apiary.io">http://docs.rcv3.apiary.io</link>
            </para>
          </listitem>
          <listitem>
            <para>The <emphasis role="italic">RackConnect Getting Started Guide</emphasis> is
              available at <link xlink:href="http://docs.rackspace.com"
                >http://docs.rackspace.com</link></para>
          </listitem>
          <listitem>
            <para>A Knowledge Center article about getting started with the RackConnect v3.0 API is
              available at: <link
                xlink:href="http://www.rackspace.com/knowledge_center/article/getting-started-with-the-rackconnect-v30-api"
                >http://www.rackspace.com/knowledge_center/article/getting-started-with-the-rackconnect-v30-api</link>.</para>
          </listitem>
          <listitem>
            <para>RackConnect support articles are available at: <link
                xlink:href="http://www.rackspace.com/knowledge_center/product-page/rackconnect"
                >http://www.rackspace.com/knowledge_center/product-page/rackconnect</link>.<?sbr?></para>
          </listitem>
        </itemizedlist>
      </para>
    </section>
    <section xml:id="change_history">
      <title>Document change history</title>
      <para>This version of the document replaces and obsoletes all previous versions. The following
        table describes the most recent changes:</para>
      <para>
        <?rax revhistory?>
      </para>
    </section>
  </chapter>
  <chapter xml:id="concepts"><title>RackConnect concepts</title>
    <para>RackConnect v3.0 is the hybrid connectivity offering from Rackspace that enables you to
      combine features of Rackspace dedicated and cloud hosting into one all-encompassing solution. </para>
    <para>
      <itemizedlist>
        <listitem>
          <para><link linkend="RackConnect_v3.0_API_overview">RackConnect v3.0 API
            overview</link></para>
        </listitem>
        <listitem>
          <para><link linkend="load-balancer-pools">Load balancer pools</link></para>
        </listitem>
      </itemizedlist>
    </para>
    <section xml:id="RackConnect_v3.0_API_overview"><title>RackConnect v3.0 API overview</title><para>RackConnect v3.0 includes an enhanced API that enables you to accomplish the following
        tasks:</para>
    <itemizedlist>
      <listitem>
        <para>Seamlessly add and remove cloud servers from your load balancer pools</para>
      </listitem>
      <listitem>
        <para>List your available load balancer pools</para>
      </listitem>
      <listitem>
        <para>Add and remove public IP addresses from your cloud servers</para>
      </listitem>
      <listitem>
        <para>List your public IP addresses</para>
      </listitem>
      <listitem>
        <para>List the cloud networks associated with your RackConnect configuration</para>
      </listitem>
    </itemizedlist>
    <para>RackConnect is based on and requires Rackspace Cloud Networks for cloud-side connectivity.
      Because of this, RackConnect is compatible only with the same types of Cloud Servers that
      Cloud Networks supports, which excludes first-generation Cloud Servers.</para>
    <para>RackConnect has configuration options that can improve security for your Cloud Servers
        environment, including support for servers built with only a single network interface
        connected to an isolated cloud network. </para>
      <para>You can choose to create a truly isolated and secure Cloud Servers environment that has
        connectivity only with other servers on the same isolated network, or you can allow network
        access to your dedicated networks or the Internet. </para>
      <para>To further increase the security of your RackConnect environment, you also have the
        ability to use the Rackspace dedicated intrusion detection system (IDS) and web application
        firewall (WAF) offerings.</para></section>
  <section xml:id="load-balancer-pools"><title>Load balancer pools</title><para>Load balancers distribute workloads across two or more servers, network links or other
        resources. This distribution maximizes throughput, minimizes response time and helps avoid
        overload.</para>
      <para>RackConnect v3.0 supports the dedicated F5 BIG-IP Local Traffic Manager (LTM) and
        Brocade ADX Series load balancers for use with the management of RackConnect automated pool
        membership.Â </para>
      <para>When your cloud servers host an application that scales up and down (for example, the
        web tier of an application), it is important to have a method for adding and removing cloud
        servers from their associated load balancer pools. If you use a dedicated load balancer with
        RackConnect, you can specify the load balancer pool that a cloud server should be placed in
        when it is created. When you delete the cloud server, it will automatically be removed from
        the pool.</para>
      <para>After you initially create a cloud server, you can use the following RackConnect API
        load balancer pool operations:</para>
      <itemizedlist>
        <listitem>
          <para>Retrieve a list of load balancer pools</para>
        </listitem>
        <listitem>
          <para>Retrieve pool details for a specific load balancer pool</para>
        </listitem>
        <listitem>
          <para>Retrieve a list of all pool member nodes for a specific load balancer pool</para>
        </listitem>
        <listitem>
          <para>Retrieve details for a specific pool member node (servers) within a specific load
            balancer pool</para>
        </listitem>
        <listitem>
          <para>Add a pool member node to a specific load balancer pool</para>
        </listitem>
        <listitem>
          <para>Remove a pool member node from a specific load balancer pool</para>
        </listitem>
        <listitem>
          <para>Bulk add multiple pool member nodes to one or more load balancer pools</para>
        </listitem>
        <listitem>
          <para>Bulk remove multiple pool member nodes from one or more load balancer pools</para>
        </listitem>
      </itemizedlist>
      <para>The RackConnect API is region-specific and returns results only for the region specified
        in the URL of the API call itself. For more information on using the API to work with load
        balancer pools, see <link linkend="load-balancer-pools">Load balancer pools</link>.</para></section>
  
  </chapter>
  <chapter xml:id="authentication">
    <title>Authentication</title>
    <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML">Every REST request against the RackConnect
      service requires the inclusion of a specific authorization token, supplied by the
        <code>X-Auth-Token</code> HTTP header. Customers obtain this token by first using the
      Rackspace Cloud Identity service and supplying a valid user name and API access key. </para>
    <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML">To authenticate, submit a
        <code>POST/v2.0/tokens</code> request, presenting valid Rackspace customer credentials in
      the message body to a Rackspace authentication endpoint. </para>
    <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML">
      <emphasis role="bold">Get your credentials</emphasis>
    </para>
    <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML">You can use either of two sets of credentials: <itemizedlist>
        <listitem>
          <para>Your user name and password </para>
        </listitem>
        <listitem>
          <para>Your user name and API key </para>
        </listitem>
      </itemizedlist>
    </para>
    <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML">Your user name and password are the ones that you
      use to log in to the Cloud Control Panel. After you are logged in, you can use the Cloud
      Control Panel to obtain your API key.</para>
    <note xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML">
      <para> If you authenticate with username and password credentials, you can set up multi-factor
        authentication to add an additional level of security to your account. This feature is not
        available for username and API credentials. For information about setting up and using
        multi-factor authentication, see <link
          xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/MFA_Ops.html"
          >Multi-factor authentication</link> in the <citetitle>Cloud Identity Client Developer
          Guide</citetitle>. </para>
    </note>
    <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML"><emphasis role="bold">To find your API
        key</emphasis>
    </para>
    <orderedlist xmlns:html="http://www.w3.org/1999/xhtml"
      xmlns:wadl="http://wadl.dev.java.net/2009/02" xmlns:m="http://www.w3.org/1998/Math/MathML">
      <listitem>
        <para>Log in to the Cloud Control Panel (<link xlink:href="https://mycloud.rackspace.com"
            >https://mycloud.rackspace.com</link>).</para>
      </listitem>
      <listitem>
        <para>On the upper-right side of the top navigation pane, click the <emphasis role="bold"
            >Account: <emphasis role="italic">userName</emphasis></emphasis> menu. </para>
      </listitem>
      <listitem>
        <para>From the menu, select <guilabel>Account Settings</guilabel>.</para>
      </listitem>
      <listitem>
        <para>In the Login Details section of the Account Settings page, locate the <guilabel>API
            Key</guilabel> field and click <guibutton>Show</guibutton>.</para>
      </listitem>
      <listitem>
        <para>Copy the value of the API key and paste it into a text editor of your choice.</para>
      </listitem>
      <listitem>
        <para>Click <guibutton>Hide</guibutton> to hide the value of the API key.</para>
      </listitem>
    </orderedlist>
    <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML">You also need your cloud account number. In the
      documentation, the account number is often referred to as your tenant name or tenant ID
      (technically, the ID is different from the name, but at Rackspace, they are the same thing).
      Together, three componentsâyour user name, your API key, and your tenant ID or cloud account
      numberâform the authentication credentials that are required to connect to the Rackspace
      cloud.</para>
    <para>To find your tenant ID or cloud account number, click the <emphasis role="bold">Account:
          <emphasis role="italic">userName</emphasis></emphasis> menu in the top navigation pane of
      the Cloud Control Panel. The tenant ID or account number is listed as the first item in the
      menu.</para>
    <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML">
      <emphasis role="bold">Use your authentication endpoint</emphasis>
    </para>
    <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
      xmlns:m="http://www.w3.org/1998/Math/MathML">Use the following global endpoint to access the
      Cloud Identity service: <itemizedlist spacing="compact">
        <listitem>
          <para><link xlink:href=" https://identity.api.rackspacecloud.com/v2.0/">
              https://identity.api.rackspacecloud.com/v2.0/</link></para>
        </listitem>
      </itemizedlist></para>
    <section xml:id="Retrieving_the_auth_token">
      <title>Retrieving the authentication token</title>
      <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
        xmlns:m="http://www.w3.org/1998/Math/MathML">If you know your credentials and your
        authentication endpoint, and you can issue a <code>POST /v2.0/tokens</code> request in an
        API call, you have all the basic information that you need to use the Rackspace Cloud
        Identity service. </para>
      <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
        xmlns:m="http://www.w3.org/1998/Math/MathML">You can use <link
          xlink:href="http://curl.haxx.se/">cURL</link> to try the authentication process in two
        steps: get a token, and send the token to a service.<orderedlist>
          <listitem>
            <para>Get an authentication token by providing your user name and either your API key or
              your password. Following are examples of both approaches:</para>
            <itemizedlist>
              <listitem>
                <para>Your user name and your API key: </para>
                <para>
                  <programlisting> curl -X POST https://auth.api.rackspacecloud.com/v2.0/tokens -d '{ "auth":{ "RAX-KSKEY:apiKeyCredentials":{ "username":"<emphasis role="bold">yourUserName</emphasis>", "apiKey":"<emphasis role="bold">yourApiKey</emphasis>" } } }' -H "Content-type: application/json" </programlisting>
                </para>
              </listitem>
              <listitem>
                <para>Your user name and your password: </para>
                <para>
                  <programlisting> curl -X POST https://auth.api.rackspacecloud.com/v2.0/tokens -d '{"auth":{"passwordCredentials":{"username":"<emphasis role="bold">yourUserName</emphasis>","password":"<emphasis role="bold">yourPassword</emphasis>"}}}' -H "Content-type: application/json" </programlisting>
                </para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para>Review the authentication response. <itemizedlist>
                <listitem>
                  <para>Successful authentication returns a token that you can use as evidence that
                    your identity has already been authenticated. A service catalog, which lists the
                    endpoints that you can use for Rackspace Cloud services, is also returned. To
                    use the token, pass it to other services as an X-Auth-Token header.  To use the
                    token, pass it to other services as an <code>X-Auth-Token</code> header.</para>
                </listitem>
                <listitem>
                  <para>If the Identity service returns a 401 message with a request for additional
                    credentials, your account requires <link
                      xlink:href="https://identity.api.rackspacecloud.com/v2.0">multi-factor
                      authentication</link>. To complete the authentication process, submit a second
                      <code>POST /v2.0/tokens</code> request with the following multi-factor
                    authentication credentials: <itemizedlist>
                      <listitem>
                        <para>The session ID value returned in the <code>WWW-Authenticate: OS-MF
                            sessionId</code> header parameter that is included in the response to
                          the initial authentication request.</para>
                      </listitem>
                      <listitem>
                        <para>The passcode from the mobile phone associated with your user
                          account.</para>
                        <example>
                          <title>Authentication request with multi-factor authentication
                            credentials</title>
                          <programlisting language="bash" role="gutter: false"><?db-font-size 60%?><prompt>$</prompt>curl https://identity.api.rackspacecloud.com/v2.0/tokens \
     -X POST \
     -d '{"auth": {"RAX-AUTH:passcodeCredentials": {"passcode":"1411594"}}}'\
     -H "X-SessionId: $SESSION_ID" \
     -H "Content-Type: application/json" --verbose | python -m json.tool</programlisting>
                        </example>
                      </listitem>
                    </itemizedlist></para>
                </listitem>
              </itemizedlist>
            </para>
          </listitem>
          <listitem>
            <para>Use the authentication token to send a <command>GET</command> request to a service
              that you want to use. Following is an example of passing an authentication token to
              the Cloud Files service, using the Cloud Files service catalog endpoint that was
              returned with the token. </para>
            <para>
              <programlisting>curl -X GET https://storage101.dfw1.clouddrive.com/v1/MossoCloudFS_aaaaaaaa-bbbb-cccc-dddd-eeeeeeee
-H 'X-Auth-Token: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' --verbose</programlisting>
            </para>
          </listitem>
        </orderedlist>
      </para>
      <tip xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
        xmlns:m="http://www.w3.org/1998/Math/MathML">
        <para> For links to language binding examples that you can adapt to work with the Cloud
          Identity service, visit <link
            xlink:href="http://docs.rackspace.com/sdks/guide/content/index.html">
            docs.rackspace.com/sdks/guide/content/index.html</link>.</para>
      </tip>
      <para xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
        xmlns:m="http://www.w3.org/1998/Math/MathML">Authentication tokens are typically valid for
        24 hours. Applications should be designed to re-authenticate after receiving a 401
        (Unauthorized) response from a service endpoint. </para>
      <important xmlns:html="http://www.w3.org/1999/xhtml"
        xmlns:wadl="http://wadl.dev.java.net/2009/02" xmlns:m="http://www.w3.org/1998/Math/MathML">
        <para>If you are programmatically parsing an authentication response, be aware that service
          names are stable for the life of the particular service and can be used as keys. You
          should also be aware that a user's service catalog can include multiple uniquely-named
          services that perform similar functions. For example, <emphasis role="italic"
            >cloudServersOpenStack</emphasis> is the OpenStack version of compute whereas <emphasis
            role="italic">cloudServers</emphasis> is the legacy version of compute. The same user
          can have access to both services. In the Cloud Identity v2.0 service, the service type
          attribute can be used as a key to recognize similar services. See the following
          tip.</para>
      </important>
      <tip xmlns:html="http://www.w3.org/1999/xhtml" xmlns:wadl="http://wadl.dev.java.net/2009/02"
        xmlns:m="http://www.w3.org/1998/Math/MathML">
        <para>Beginning with Rackspace Cloud Identity v2.0 service (earlier versions were called
          Rackspace Cloud Authentication Service), the service catalog includes a service type
          attribute to identify services that perform similar functions but have different names.
          For example, <code>type="compute"</code> identifies compute services such as <emphasis
            role="italic">cloudServers</emphasis> and <emphasis role="italic"
            >cloudServersOpenStack</emphasis>. Some developers have found the service type attribute
          to be useful in parsing the service catalog. For Cloud Identity v2.0 service , you can see
          the service type attribute in the "Service Catalog in Authentication Response" samples in
          the <citetitle>Cloud Identity Client Developer Guide</citetitle> at <link
            xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/Sample_Request_Response-d1e64.html"
            >http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/Sample_Request_Response-d1e64.html</link>.</para>
      </tip>
    </section>
    <section xml:id="Role_based_access_control">
      <title>Role Based Access Control</title>
      <para>Role Based Access Control (RBAC) restricts access to the capabilities of Rackspace Cloud
        services, including the RackConnect API, to authorized users only. RBAC enables Rackspace
        Cloud customers to specify which account users of their Cloud account have access to which
        RackConnect API service capabilities, based on roles defined by Rackspace.</para>
      <para>The permissions to perform certain operations in the RackConnect API â create, read,
        update, delete â are assigned to specific roles. The Cloud account owner
        (identity:user-admin) can create account users on the account and then assign roles, either
        global (multiproduct) or product-specific, to those users. Each account has only one account
        owner, and that role is assigned by default to any Rackspace Cloud account when the account
        is created.</para>
        <para>For more information about RBAC, see the <link
          xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/Role_Based_Access_Control-d1e808.html"
          >RBAC</link> section in the <citetitle>Cloud Identity Client Developer Guide</citetitle>.
        For information about how to perform the following tasks, see the <citetitle>Cloud Identity
          Client Developer Guide</citetitle>:</para>
        <itemizedlist spacing="compact">
          <listitem>
            <para><link
                xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/POST_addUser__v2.0_users_User_Calls.html"
                >Create account users</link></para>
          </listitem>
          <listitem>
            <para><link
                xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/PUT_addUserRole__v2.0_users__userId__roles_OS-KSADM__roleid__Role_Calls.html"
                >Assign roles to account users</link></para>
          </listitem>
          <listitem>
            <para><link
                xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/DELETE_deleteUserRole__v2.0_users__userId__roles_OS-KSADM__roleid__Role_Calls.html"
                >Delete roles from account users</link></para>
          </listitem>
        </itemizedlist>
        <note>
          <para>The account owner (identity:user-admin) role cannot hold any additional roles
            because it already has full access to all capabilities.</para>
        </note>
      
    </section>
  </chapter>
  <chapter xml:id="general-api-information">
    <title>General API information</title>
    <para>The RackConnect v3.0 API is designed for Rackspace cloud accounts that leverage version 3
      of RackConnect.</para>
    <section xml:id="service-endpoints">
      <title>Service access endpoints</title>
      <para security="external">The RackConnect v3.0 API provides the following endpoint for making
        API calls.</para>
      <para>https://<replaceable>region</replaceable>.rackconnect.api.rackspacecloud.com/v3/<replaceable>tenantId</replaceable></para>
      <para>
      </para>
      <para xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:html="http://www.w3.org/1999/xhtml"
        >Replace the <emphasis role="italic">region</emphasis> and <emphasis role="italic"
          >tenantID</emphasis>Â placeholders with the region where your cloud servers are located and
        your cloud account's tenant ID number, which is also referred to as your account ID. Your
        account ID is located after the final slash (/) in the <code>publicURL</code> field returned
        by the authentication response.</para>
    </section>
    <section xml:id="contract-version" xmlns:m="http://www.w3.org/1998/Math/MathML"
      xmlns:html="http://www.w3.org/1999/xhtml">
      <title>RackConnect contract version</title>
      <para>The Rackspace RackConnect version defines the contract and build information for the
        API. </para>
      <para>The contract version denotes the data model and behavior that the API supports. The
        requested contract version is included in all request URLs. Different contract versions of
        the API might be available at any given time and are not guaranteed to be compatible with
        one another. </para>
      <example>
        <title>Example request URL (contract version in <emphasis role="strong"
          >bold</emphasis>)</title>
        <programlisting>https://dfw.rackconnect.api.rackspacecloud.com/<emphasis role="bold">v3</emphasis>/<parameter>123456</parameter></programlisting>
      </example>
      <note>
        <para>This document pertains to contract version 3.0.</para>
      </note>
    </section>
    <section xml:id="request-response-types" xmlns:m="http://www.w3.org/1998/Math/MathML"
      xmlns:html="http://www.w3.org/1999/xhtml">
      <title>Request and response types</title>
      <para>The RackConnect API supports JSON data serialization formats. </para>
      <para>Specify the request format by using the <code>Content-Type</code> header, which is
          <emphasis role="italic">required</emphasis> for operations that have a request body. </para>
      <para>You can specify the response format in requests by using the <code>Accept</code> header
        or by adding a <code>.json</code> extension to the request URI. If no response format is
        specified, JSON is the default response format. </para>
      <table rules="all">
        <caption>Response format</caption>
        <?dbfo keep-together="always"?>
        <thead>
          <tr align="center">
            <td>Format</td>
            <td>Accept header</td>
            <td>Query extension</td>
            <td>Default</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>JSON</td>
            <td>application/json</td>
            <td>.json</td>
            <td>Yes</td>
          </tr>
        </tbody>
      </table>
    </section>
    <section xml:id="limits" xmlns:m="http://www.w3.org/1998/Math/MathML"
      xmlns:html="http://www.w3.org/1999/xhtml">
      <title>Limits</title>
      <para>All accounts are configured with default thresholds, or limits, that manage capacity and
        prevent abuse of the system. </para>
      <para>Each of your cloud servers is limited to making 30 requests per minute. If a server
        exceeds the number of allowed requests per minute, you will receive an HTTP 403 (Forbidden)
        response code. The counter resets each minute.</para>
      <note>
        <para>If the default limits are too low for your particular application, contact Rackspace
          Cloud support to request an increase. All requests require reasonable
          justification.</para>
      </note>
    </section>
    <section xml:id="common-headers">
      <title>Common headers</title>
      <para>The following table describes the common headers used by the API.</para>
      <table rules="all">
        <caption>Common headers</caption>
        <col width="30%"/>
        <col width="70%"/>
        <thead>
          <tr>
            <th>Header</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>X-Auth-Token</td>
            <td>Authentication token. Required.</td>
          </tr>
          <tr>
            <td>X-Project-Id</td>
            <td>A unique ID for the user to which the value of <code>X-Auth-Token</code> grants
              access. The unique ID is your account ID.</td>
          </tr>
          <tr>
            <td>Accept</td>
            <td>Media type. Initially, only <code>application/json</code> is supported. </td>
          </tr>
          <tr>
            <td>Accept-Encoding</td>
            <td>Specifies that the agent accepts gzip-encoded response bodies</td>
          </tr>
          <tr>
            <td>Client-ID</td>
            <td>A unique ID for each client instance. A unique ID for each client instance. The
              client ID is used to avoid echoing a sender's messages back to the same instance, and
              it can be logged by the server for future use. The client generates the client ID
              once, and it persists between restarts of the client. The client should reuse the same
              client ID.  <emphasis role="bold">Note</emphasis>: All message-related operations
              require that <code>Client-ID</code> is included in the headers to ensure that messages
              are not echoed back to the client that posted them, unless the client explicitly
              requests this.</td>
          </tr>
          <tr>
            <td>Content-Length</td>
            <td>For <command>POST</command> or <command>PUT</command> requests, the length in bytes
              of the message document being submitted</td>
          </tr>
          <tr>
            <td>Content-Type</td>
            <td><code>application/json</code>
            </td>
          </tr>
          <tr>
            <td>Date</td>
            <td>Current date and time</td>
          </tr>
          <tr>
            <td>Host</td>
            <td>Host name of the API</td>
          </tr>
        </tbody>
      </table>
    </section>
    <section xml:id="date-time-format">
      <title>Date and time format</title>
      <para>The RackConnect service uses an ISO-8601 compliant date format for the display and
        consumption of date and time values. </para>
      <example>
        <title>Service date and time format</title>
        <programlisting>yyyy-MM-dd'T'HH:mm:ss.SSSZ</programlisting>
        <para>For example, September 19, 2014 at 8:07:08 AM, GMT-5 would have the following
          format:</para>
        <programlisting>2014-09-19T08:07:08-05:00</programlisting>
      </example>
      <para> The following table describes the date and time format codes. </para>
      <table rules="all">
        <caption>Explanation of date and time format codes</caption>
        <thead>
          <tr>
            <td>Code</td>
            <td>Description</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>yyyy</td>
            <td>Four-digit year</td>
          </tr>
          <tr>
            <td>MM</td>
            <td>Two-digit month</td>
          </tr>
          <tr>
            <td>dd</td>
            <td>Two-digit day of the month</td>
          </tr>
          <tr>
            <td>T</td>
            <td>Separator between the date and the time</td>
          </tr>
          <tr>
            <td>HH</td>
            <td>Two-digit hour of the day (00-23)</td>
          </tr>
          <tr>
            <td>mm</td>
            <td>Two-digit minutes of the hour</td>
          </tr>
          <tr>
            <td>ss</td>
            <td>Two-digit seconds of the minute</td>
          </tr>
          <tr>
            <td>SSS</td>
            <td>Three-digit milliseconds of the second</td>
          </tr>
          <tr>
            <td>Z</td>
            <td>RFC-822 time zone</td>
          </tr>
        </tbody>
      </table>
    </section>
    <section xml:id="response-codes">
      <title>Response codes</title>
      <para>RackConnect returns an HTTP code that denotes the type of response. </para>
      <itemizedlist>
        <listitem>
          <para>Successful response codes are returned only if all configured providers were
            successful in processing the request.</para>
        </listitem>
        <listitem>
          <para>Error response codes are accompanied by an <code>application/json</code> response
            body that contains the error messages.</para>
        </listitem>
      </itemizedlist>
      <para>The following table lists possible responses with their associated codes and
        descriptions.</para>
      <table rules="all">
        <caption>List of response codes</caption>
        <thead>
          <tr align="center">
            <td colspan="2">Response</td>
            <td colspan="1">Associated response code</td>
            <td colspan="3">Description</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="2"><code>OK</code></td>
            <td colspan="1">200</td>
            <td colspan="3">The request has succeeded. (Some API calls might return 201
              instead.)</td>
          </tr>
          <tr>
            <td colspan="2"><code>Created</code></td>
            <td colspan="1">201</td>
            <td colspan="3">The request has been fulfilled and a resource was created.</td>
          </tr>
          <tr>
            <td colspan="2"><code>Accepted</code></td>
            <td colspan="1">202</td>
            <td colspan="3">The request has been accepted for processing.</td>
          </tr>
          <tr>
            <td colspan="2"><code>No Content</code></td>
            <td colspan="1">204</td>
            <td colspan="3">The request has been fulfilled but does not return a representation
              (that is, the response is empty).</td>
          </tr>
          <tr>
            <td colspan="2"><code>Service Unavailable</code></td>
            <td colspan="1">503</td>
            <td colspan="3">The service is temporarily unavailable (for example, for scheduled
              platform maintenance). Try again later.</td>
          </tr>
        </tbody>
      </table>
      <para xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:html="http://www.w3.org/1999/xhtml"
        ><?rax-fo keep-with-next?> An example of an error message follows. </para>
      <example xmlns:m="http://www.w3.org/1998/Math/MathML"
        xmlns:html="http://www.w3.org/1999/xhtml">
        <title>Error message example</title>
        <programlisting>HTTP/1.1 400 Bad Request
Content-Type: application/json

{
  "title": "Unsupported limit",
  "description": "The given limit cannot be negative, and cannot be greater than 50.",
  "code": 1092,
  "link": {
    "rel": "help",
    "href": "http://docs.example.com/messages#limit",
    "text": "API documentation for the limit parameter"
  }
}</programlisting>
      </example>
    </section>
  </chapter>
  <chapter xml:id="api-operations" role="api-reference">
    <!-- role="api-reference" introduces chapter 
        with table of operations describing full content of WADL -->
    <title>API Reference</title>
    <para>The RackConnect 3.0 API provides API operations for the following features<itemizedlist>
        <listitem>
          <para><link linkend="CloudNetworks_Operations">Cloud networks</link></para>
        </listitem>
        <listitem>
          <para><link linkend="LBPools_Operations">Load balancer pools</link></para>
        </listitem>
        <listitem>
          <para><link linkend="PublicIPs_Operations">Public IPs</link></para>
        </listitem>
      </itemizedlist></para>
    <section xml:id="CloudNetworks_Operations">
      <title>Cloud networks</title>
      <para> These API operations relate only to cloud networks associated with a RackConnect
        configuration.</para>
      <para> The <code>network_id</code> returned by these calls matches the cloud networks UUID
        returned by the Cloud Networks (Neutron) API. <tip>
          <para> You can learn about the Cloud Networks API in the following sources of Rackspace
            API-related documentation: <itemizedlist>
              <listitem>
                <para> API operations reference at <link
                    xlink:href="http://api.rackspace.com/api-ref-networks.html"
                    >api.rackspace.com</link>
                </para>
              </listitem>
              <!-- 
                2014-11-28 Cloud Networks is not included 
                in QuickStarts; when it is, update this 
              <listitem>
                <para>
                  SDK QuickStarts at 
                  <link 
                    xlink:href="https://developer.rackspace.com/docs/cloud-servers/getting-started/">
                    developer.rackspace.com
                  </link>
                </para>
              </listitem>
              -->
              <listitem>
                <para> API developer guide and getting started guide at <link
                    xlink:href="http://docs.rackspace.com/">docs.rackspace.com</link>
                </para>
              </listitem>
            </itemizedlist>
          </para>
        </tip></para>
      <para>This section describes the &PRODUCTNAME; API operations that relate to cloud
        networks.</para>
      <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
        <wadl:resource href="../wadl/rackconnect.wadl#cloud_networks">
          <wadl:method href="../wadl/rackconnect.wadl#cloudNetworks-listall"/>
        </wadl:resource>
        <wadl:resource href="../wadl/rackconnect.wadl#network_id">
          <wadl:method href="../wadl/rackconnect.wadl#cloudNetworks-list1"/>
        </wadl:resource>
      </wadl:resources>
    </section>
    <section xml:id="LBPools_Operations">
      <title>Load balancer pools</title>
      <para>Load balancer pools must be configured in advance by your Network Security team to be
        eligible for use with RackConnect. If you do not see a pool that you expect to see, contact
        your Support team for assistance. </para>
      <para>The <code>load_balancer_pool_id</code>returned by these calls is automatically generated
        by the RackConnect automation and remains constant unless the load balancer pool is renamed
        on your hardware load balancer. </para>
      <para> All load balancer pools currently return a status of <code>ACTIVE</code>. Future
        features might introduce additional statuses. </para>
      <para>This section describes the &PRODUCTNAME; API operations that relate to load balancer
        pools.</para>
      <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
        <wadl:resource href="../wadl/rackconnect.wadl#load_balancer_pools">
          <wadl:method href="../wadl/rackconnect.wadl#LBPools-listall"/>
        </wadl:resource>
        <wadl:resource href="../wadl/rackconnect.wadl#load_balancer_pool_id">
          <wadl:method href="../wadl/rackconnect.wadl#LBPools-list1"/>
        </wadl:resource>
      </wadl:resources>
    </section>
    <!--      
      <section 
        xml:id="LBPoolNodes_Operations">
        <title>Load balancer pool nodes</title>
        <para>
          The <code>load_balancer_pool_id</code>returned by 
          these calls is automatically generated 
          by the RackConnect automation 
          and remains constant 
          unless the load balancer pool 
          is renamed on your hardware load balancer.
        </para>
        <para> All load balancer pools currently return a status of
          <code>ACTIVE</code>. Future features may introduce
          additional statuses. </para>
        <para> Node status values are: <itemizedlist>
          <listitem>
            <para><code>ADDING</code></para>
          </listitem>
          <listitem>
            <para><code>ACTIVE</code></para>
          </listitem>
          <listitem>
            <para><code>REMOVING</code></para>
          </listitem>
          <listitem>
            <para><code>ADD_FAILED</code></para>
          </listitem>
          <listitem>
            <para><code>REMOVE_FAILED</code></para>
          </listitem>
        </itemizedlist></para>
        <para> The cloud_servers node count includes only cloud
          servers from the cloud account specified as
          <code>tenant_id</code>. Any dedicated servers or cloud
          servers from another cloud account on the same RackConnect
          configuration are counted as external nodes. </para>
        
        <para>This section describes the &PRODUCTNAME; API operations
          that relate to load balancer pool nodes.</para>
        
        <wadl:resources 
          xmlns:wadl="http://wadl.dev.java.net/2009/02">
 
          <wadl:resource 
            href="../wadl/rackconnect.wadl#load_balancer_pools">
          </wadl:resource>
        
          <wadl:resource 
            href="../wadl/rackconnect.wadl#load_balancer_pool_id">
          </wadl:resource>
 
            <wadl:resource 
              href="../wadl/rackconnect.wadl#nodes">
              <wadl:method 
                href="../wadl/rackconnect.wadl#listNodes1LBPool"/>
              <wadl:method 
                href="../wadl/rackconnect.wadl#LBPools-nodes-add1"/>
            </wadl:resource>
              
            <wadl:resource 
                href="../wadl/rackconnect.wadl#details">
                <wadl:method 
                  href="../wadl/rackconnect.wadl#LBPools-nodes-listall-details"/>
             </wadl:resource>

        </wadl:resources> 
        
      </section>
    -->
    <section xml:id="PublicIPs_Operations">
      <title>Public IPs</title>
      <para>The RackConnect v3.0 API enables you toÂ add and remove public IP addresses from your
        RackConnect v3.0 cloud servers. These public IP addresses are being allocated out of your
          <emphasis role="italic">dedicated</emphasis> environment's assigned public IP blocks. </para>
      <para> Public IP address status values are as follows: <itemizedlist>
          <listitem>
            <para><code>ADDING</code></para>
          </listitem>
          <listitem>
            <para><code>ACTIVE</code></para>
          </listitem>
          <listitem>
            <para><code>REMOVING</code></para>
          </listitem>
          <listitem>
            <para><code>ADD_FAILED</code></para>
          </listitem>
          <listitem>
            <para><code>REMOVE_FAILED</code></para>
          </listitem>
        </itemizedlist></para>
      <para>This section describes the &PRODUCTNAME; API operations that relate to public
        IP addresses.</para>
      <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
        <wadl:resource href="../wadl/rackconnect.wadl#public_ips">
          <wadl:method href="../wadl/rackconnect.wadl#publicIPs-listall"/>
          <wadl:method href="../wadl/rackconnect.wadl#publicIPs-add1"/>
          <wadl:resource href="../wadl/rackconnect.wadl#cloud_server_UUID">
            <wadl:method href="../wadl/rackconnect.wadl#publicIPs-cloudServers-list1"/>
          </wadl:resource>
        </wadl:resource>
        <wadl:resource href="../wadl/rackconnect.wadl#public_IP_id">
          <wadl:method href="../wadl/rackconnect.wadl#publicIPs-list1"/>
          <wadl:method href="../wadl/rackconnect.wadl#publicIPs-delete1"/>
        </wadl:resource>
      </wadl:resources>
    </section>
  </chapter>
</book>
